<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Websocket Socket.io</title>
</head>
<body>
<!--

unlike the ws library, socket.io requires a client script
the script provides a global variable 'io' to create socket connections

A single browser client can open multiple sockets to the server

-->
<script src="//localhost:4002/socket.io/socket.io.js"></script>
<script>

// Check that javascript code runs
console.log('Client code running')

// Connect to server
var chat = io('ws://localhost:4002/chat')
var news = io('ws://localhost:4002/news')

// Log if connection is successful
chat.on('connect', function() {
  console.log('----connected to server chat-----')

  chat.emit('message', 'c1 chat')

  chat.on('message', function(msg) {
    console.log('server chat:', msg)
  })
})

news.on('connect', function() {
  console.log('----connected to server news-----')

  news.emit('message', 'c1 news')

  chat.on('message', function(msg) {
    console.log('server news:', msg)
  })
})

</script>
</body>
</html>
